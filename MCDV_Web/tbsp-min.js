function mesh(){this.positions=[],this.normals=[],this.uvCoords=[],this.indices=[]}function info_model(){this.position=vec3.create(),this.rotation=vec3.create(),this.modelID=0}function load_binary_resource(t){var s=[],a=new XMLHttpRequest;if(a.open("GET",t,!1),a.overrideMimeType("text/plain; charset=x-user-defined"),a.send(null),200!=a.status)return s;for(var e=0;e<a.responseText.length;++e)s.push(255&a.responseText.charCodeAt(e));return s}function binaryReader(t){this.pos=0,this.data=t,this.readUint32=function(){var t=(this.data[this.pos+3]<<24)+(this.data[this.pos+2]<<16)+(this.data[this.pos+1]<<8)+this.data[this.pos+0];return this.pos+=4,t},this.readString=function(){for(var t="";;){if(0==this.data[this.pos]){this.pos++;break}t+=String.fromCharCode(this.data[this.pos]),this.pos++}return t},this.readFloat=function(){var t=[this.data[this.pos+3],this.data[this.pos+2],this.data[this.pos+1],this.data[this.pos+0]],s=new ArrayBuffer(4),a=new DataView(s);t.forEach(function(t,s){a.setUint8(s,t)});var e=a.getFloat32(0);return this.pos+=4,e}}function tbsp_model(t){var s=new binaryReader(t),a=(s.readUint32(),s.readUint32(),s.readUint32()),e=s.readUint32();this.internal_mesh=new mesh;for(var i=0;i<a;i++)this.internal_mesh.positions.push(s.readFloat()),this.internal_mesh.positions.push(s.readFloat()),this.internal_mesh.positions.push(s.readFloat()),this.internal_mesh.normals.push(s.readFloat()),this.internal_mesh.normals.push(s.readFloat()),this.internal_mesh.normals.push(s.readFloat()),this.internal_mesh.uvCoords.push(s.readFloat()),this.internal_mesh.uvCoords.push(s.readFloat());for(var r=0;r<e;r++)this.internal_mesh.indices.push(s.readUint32())}function tbsp_level(t){var s=new binaryReader(t),a=(s.readUint32(),s.readUint32(),s.readUint32()),e=s.readUint32(),i=s.readUint32(),r=s.readUint32(),o=s.readUint32(),n=s.readUint32();s.readUint32(),s.readUint32();s.pos=e,this.meshes=[];for(var h=0;h<a;h++){for(var d=s.readUint32(),l=s.readUint32(),p=new mesh,u=0;u<d;u++)p.positions.push(s.readFloat()),p.positions.push(s.readFloat()),p.positions.push(s.readFloat()),p.normals.push(s.readFloat()),p.normals.push(s.readFloat()),p.normals.push(s.readFloat()),p.uvCoords.push(s.readFloat()),p.uvCoords.push(s.readFloat());for(var m=0;m<l;m++)p.indices.push(s.readUint32());this.meshes.push(p)}s.pos=n,this.cached_models=[];for(var c=0;c<o;c++){v=new tbsp_model(load_binary_resource("ar_baggage.resources/"+s.readString().replace(".mdl",".tmdl")));this.cached_models.push(v)}s.pos=r,this.models=[];for(var f=0;f<i;f++){var v=new info_model,F=s.readFloat(),_=s.readFloat(),U=s.readFloat();v.position[0]=F,v.position[1]=_,v.position[2]=U;var b=s.readFloat(),w=s.readFloat(),g=s.readFloat();v.rotation[0]=b,v.rotation[1]=w,v.rotation[2]=g,v.modelID=s.readUint32(),this.models.push(v)}}
